# Kitty Configuration
# Migrated from wezterm

# ===== Font =====
font_family      Victor Mono SemiBold
italic_font      Victor Mono Oblique
font_size        14.0
disable_ligatures always
modify_font cell_width -1px

macos_colorspace srgb
text_composition_strategy legacy


# ===== Window =====
window_padding_width 5
hide_window_decorations titlebar-only
confirm_os_window_close 0
inactive_text_alpha 0.7

# ===== Bell =====
enable_audio_bell no
visual_bell_duration 0

# ===== Cursor =====
cursor_shape block
cursor_blink_interval 0

# ===== Shell =====
shell /bin/zsh --login

# ===== Remote Control (for Navigator.nvim) =====
allow_remote_control yes
listen_on unix:/tmp/kitty

# ===== Scrollback =====
scrollback_lines 10000

# ===== Tab Bar =====
tab_bar_edge top
tab_bar_style custom
tab_bar_min_tabs 1
tab_switch_strategy right

# ===== Layouts =====
enabled_layouts splits,stack

# ===== macOS specific =====
macos_option_as_alt yes
macos_quit_when_last_window_closed no
macos_traditional_fullscreen no

# ===== Colors =====
include themes/jordan.conf

# ===== Selection =====
selection_foreground #000000
selection_background #fffacd

# ===== Keybindings =====
# Clear defaults and use custom
clear_all_shortcuts no
kitty_mod ctrl+shift

# Basic commands
map cmd+h hide_macos_app
map cmd+m minimize_macos_window
map cmd+q kitten confirm_quit.py
map cmd+n new_os_window
map cmd+t new_tab
map cmd+w close_window

# Font size
map cmd+equal change_font_size all +1.0
map cmd+minus change_font_size all -1.0
map cmd+0 change_font_size all 0

# Copy/Paste
map cmd+c copy_to_clipboard
map cmd+v paste_from_clipboard
map kitty_mod+p paste_from_clipboard

# Splits (kitty calls panes "windows")
map kitty_mod+enter launch --location=vsplit --cwd=current
map kitty_mod+' launch --location=hsplit --cwd=current
map kitty_mod+\ kitten side_pane.py

# Navigate panes (windows) - vim-kitty-navigator
# 5th arg is fallback key when no neighbor (for shell history/scrolling)
map ctrl+h kitten pass_keys.py left ctrl+h
map ctrl+j kitten pass_keys.py bottom ctrl+j "n?vim" down
map ctrl+k kitten pass_keys.py top ctrl+k "n?vim" up
map ctrl+l kitten pass_keys.py right ctrl+l

# Resize panes
map kitty_mod+left kitten resize_pane.py left 12
map kitty_mod+right kitten resize_pane.py right 12
map kitty_mod+up kitten resize_pane.py up 5
map kitty_mod+down kitten resize_pane.py down 5

# Zoom toggle
map kitty_mod+z toggle_layout stack
map kitty_mod+equal toggle_layout stack

# Tab navigation
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9
map ctrl+tab next_tab
map ctrl+shift+tab previous_tab
map cmd+alt+h previous_tab
map cmd+alt+l next_tab
map cmd+alt+left previous_tab
map cmd+alt+right next_tab

# Move tabs
map ctrl+alt+cmd+left move_tab_backward
map ctrl+alt+cmd+right move_tab_forward

# Rename tab
map kitty_mod+r set_tab_title

# Rotate panes
map kitty_mod+; layout_action rotate

# Scroll to prompt (shell integration required)
map shift+up scroll_to_prompt -1
map shift+down scroll_to_prompt 1

# Quick select / hints
map kitty_mod+e open_url_with_hints
map kitty_mod+f kitten hints --type path --program @
map kitty_mod+h kitten hints --type hash --program @
map kitty_mod+l kitten hints --type line --program @
map kitty_mod+b kitten hints --type regex --regex '(?<!/)(?:main|master|staging|(?:jordan|feat|feature|fix|chore|hotfix|bugfix|release|refactor)/[a-zA-Z0-9_-]+)' --program @

# Window movement
map kitty_mod+] move_window_forward
map kitty_mod+[ move_window_backward

# Disable defaults that conflict
map kitty_mod+w no_op

# Copy mode (scrollback)
map f1 show_scrollback
map ctrl+1 show_scrollback

# Reload config
map ctrl+alt+cmd+5 load_config_file

# Send Ctrl+- and Ctrl+= to apps (nvim fold)
map ctrl+minus send_text all \x1b[23~
map ctrl+equal send_text all \x1b[24~

# Vim tab management (send alt+shift+e/o)
map cmd+shift+e send_key alt+shift+e
map cmd+shift+o send_key alt+shift+o

# claude sends shift+enter to send a newline
map shift+enter send_text all \e\r
